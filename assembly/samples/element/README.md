# Sample: Element

This is a Maven project to demonstrate the unmarshalling of XML files using an XML Schema to generate the JAXB classes.

## Execution

This is a stand-alone Maven project. You can run the test using:

~~~
mvn -Ptest clean test
~~~

The [output][6] shows the test results.

### Problem

Use the *HiSrc HigherJAXB Maven Plugin* to generate JAXB classes from an XML Schema and demonstrate a mixed complex type element that contains attributes, elements, and text.

### Solution

Create a Maven project named **Element** using the standard file layout. This project includes:

+ An XML Schema file [element.xsd][2] for the `Element` model
+ A JAXB *binding* file [element.xjb][3] for customizations
+ A JUnit test class to demonstrate (un)marshalling
+ Sample XML files with `Element` data.
+ The Maven POM file with `hisrc-higherjaxb-maven-plugin`

~~~
Element
    src
        main
            java
            resources
                element.xjb
                element.xsd
        test
            java
                org/example/element/ElementTest.java
            resources
                simplelogger.properties
            samples
                Element101.xml
                Element102.xml
    pom.xml
~~~

The JAXB classes are generated by this plugin in this project's [pom.xml][1]

~~~
<plugin>
    <groupId>org.patrodyne.jvnet</groupId>
    <artifactId>hisrc-higherjaxb-maven-plugin</artifactId>
    <version>${hisrc-higherjaxb-maven-plugin.version}</version>
    <executions>
        <execution>
            <goals>
                <goal>generate</goal>
            </goals>
        </execution>
    </executions>
</plugin>
~~~

and are generated to:

~~~
target/generated-sources/xjc/
    org.example.element
        Element.java
        Subelement.java
        ObjectFactory.java
~~~

#### Model

The model for this example consists of a root element with attributes, child elements and a value.

~~~
element: root mixed="true"
    Id: attribute
    Composite: attribute
    subelement: children
    VALUE
~~~

To enable a character VALUE to appear within the root element *together with subelements*, its `complexType` must have a mixed attribute set to "true".

#### Testing

The JUnit test class, [ElementTest][4], scans for the sample files and invokes the method `checkSample(File sample)` to provide each file to the tester. For this project, a `JAXBContext` is created and each file in the [samples][5] path is *unmarshaled* to an `element` object. When successful, the `element` object is *marshaled* for logging and your review.

> **Note:** For *mixed* content types, JAXB generates a `List` field named `content` to store an array of the sub-elements and value(s) found. There can be multiple values interspersed among the sub-elements. The `List` preserves the order of the sub-elements and values. If white-space is used to format the content, it will be bound to the neighboring values! A better alternative may be to eliminate the need for *mixed* content by declaring individual elements, in the model, for each data value.

<!-- References -->

[1]: https://github.com/patrodyne/hisrc-higherjaxb/blob/master/assembly/samples/element/project-pom.xml
[2]: https://github.com/patrodyne/hisrc-higherjaxb/blob/master/assembly/samples/element/src/main/resources/element.xsd
[3]: https://github.com/patrodyne/hisrc-higherjaxb/blob/master/assembly/samples/element/src/main/resources/element.xjb
[4]: https://github.com/patrodyne/hisrc-higherjaxb/blob/master/assembly/samples/element/src/test/java/org/example/element/ElementTest.java
[5]: https://github.com/patrodyne/hisrc-higherjaxb/tree/master/assembly/samples/element/src/test/samples
[6]: https://github.com/patrodyne/hisrc-higherjaxb/blob/master/assembly/samples/element/OUTPUT.txt
