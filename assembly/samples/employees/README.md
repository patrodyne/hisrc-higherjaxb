# Sample: Employees

This is a Maven project to demonstrate the unmarshalling of XML files using an XML Schema to generate the JAXB classes. As a special case, a sample file containing a list of Base64 encoded XML elements is unmarshaled and marshaled.

## Execution

This is a stand-alone Maven project. You can run the test using:

~~~
mvn clean test
~~~

The [output][6] shows the test results.

### Problem from StackOverflow #[76964263](https://stackoverflow.com/questions/76964263/)

How would I marshal/ unmarshal a List of java objects to an XML without a root element?

### Solution

Although JAXB requires a top level XML element, it does not require the physical container to be a file. The message can be unmarshaled as an input stream, etc. We use this observation to *contain* each XML message in its own `Base64` stream which can then be stored as a list of streams in one *meta-container* file. This example reads each line of an input file as a `Base64` encoded stream. Each encoded line contains one `Employee` XML element; thus, each line can be unmarshaled and put into a list of `Employee` objects.

Create a Maven project named **Employees** using the standard file layout. This project includes:

+ An XML Schema file [employee.xsd][2] for the `Employee` model
+ A JAXB *binding* file [employee.xjb][3] for customizations
+ A JUnit test class to demonstrate (un)marshalling
+ Sample XML files with `Employee` data.
+ The Maven POM file with `hisrc-higherjaxb-maven-plugin`

~~~
Employees
    src
        main
            java
            resources
                employee.xjb
                employee.xsd
        test
            java
                org/example/employee/EmployeeTest.java
            resources
                simplelogger.properties
            samples
                Employee1.xml
                Employee2.xml
    pom.xml
~~~

The JAXB classes are generated by this plugin in this project's [pom.xml][1]

~~~
<plugin>
    <groupId>org.patrodyne.jvnet</groupId>
    <artifactId>hisrc-higherjaxb-maven-plugin</artifactId>
    <version>${hisrc-higherjaxb-maven-plugin.version}</version>
    <executions>
        <execution>
            <goals>
                <goal>generate</goal>
            </goals>
        </execution>
    </executions>
</plugin>
~~~

and are generated to:

~~~
target/generated-sources/xjc/
    org.example.employee
        Employee.java
        ObjectFactory.java
~~~

#### Testing

The JUnit test class, [EmployeeTest][4], scans for the sample files and invokes the method `checkSample(File sample)` to provide each file to the tester. For this project, a `JAXBContext` is created and each file in the [samples][5] path is *unmarshaled* to an `employee` object. When successful, the `employee` object is *marshaled* for logging and your review.

<!-- References -->

[1]: https://github.com/patrodyne/hisrc-higherjaxb/blob/master/assembly/samples/employees/project-pom.xml
[2]: https://github.com/patrodyne/hisrc-higherjaxb/blob/master/assembly/samples/employees/src/main/resources/employee.xsd
[3]: https://github.com/patrodyne/hisrc-higherjaxb/blob/master/assembly/samples/employees/src/main/resources/employee.xjb
[4]: https://github.com/patrodyne/hisrc-higherjaxb/blob/master/assembly/samples/employees/src/test/java/org/example/employee/EmployeeTest.java
[5]: https://github.com/patrodyne/hisrc-higherjaxb/tree/master/assembly/samples/employees/src/test/samples
[6]: https://github.com/patrodyne/hisrc-higherjaxb/blob/master/assembly/samples/employees/OUTPUT.txt


